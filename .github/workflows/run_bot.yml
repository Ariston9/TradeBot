#name: Run Telegram Bot

#on:
  #workflow_dispatch:
 # push:
 # schedule:
   # - cron: "0 */6 * * *"   # перезапуск каждые 6 часов (вечная работа)

jobs:
  bot:
    runs-on: ubuntu-latest
    timeout-minutes: 360

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          wget https://github.com/StreamAlpha/tvdatafeed/archive/refs/heads/master.zip -O tvdatafeed.zip || \
          wget https://raw.githubusercontent.com/StreamAlpha/tvdatafeed/master/tvDatafeed.py -O tvDatafeed.py
          unzip -q tvdatafeed.zip -d tvdatafeed || true
          pip install ./tvdatafeed-master || true

      #- name: Run bot
        #env:
          #BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
          #TV_USER: ${{ secrets.TV_USER }}
          #TV_PASS: ${{ secrets.TV_PASS }}
          #API_URL: ${{ secrets.API_URL }}
        #run: |
         # python tradebot_tradingview.py
